(function(t){function e(e){for(var r,o,c=e[0],l=e[1],u=e[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);s&&s(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,c=1;c<n.length;c++){var l=n[c];0!==i[l]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/kuan-vue-waterfall/demo/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var s=l;a.push(["b635","chunk-vendors"]),n()})({"0614":function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,".kuan-vue-waterfall{margin:0 auto;position:relative;overflow:hidden}.water-fall-item{box-sizing:content-box;position:absolute;left:0;top:100%;visibility:hidden;opacity:0;transition:opacity .5s .15s,left .3s,top .3s}.water-fall-item.loaded{opacity:1;visibility:visible}.water-fall-more{display:flex;align-items:center;justify-content:center;color:#999;padding:1em 0}.waterfall-loading{width:20px;height:20px;display:inline-block;vertical-align:middle;-webkit-animation:waterfallLoading 1s steps(12) infinite;animation:waterfallLoading 1s steps(12) infinite;background:transparent url(\"data:image/svg+xml;charset=utf8, %3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 100 100'%3E%3Cpath fill='none' d='M0 0h100v100H0z'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23E9E9E9' rx='5' ry='5' transform='translate(0 -30)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23989697' rx='5' ry='5' transform='rotate(30 105.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%239B999A' rx='5' ry='5' transform='rotate(60 75.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23A3A1A2' rx='5' ry='5' transform='rotate(90 65 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23ABA9AA' rx='5' ry='5' transform='rotate(120 58.66 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23B2B2B2' rx='5' ry='5' transform='rotate(150 54.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23BAB8B9' rx='5' ry='5' transform='rotate(180 50 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23C2C0C1' rx='5' ry='5' transform='rotate(-150 45.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23CBCBCB' rx='5' ry='5' transform='rotate(-120 41.34 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23D2D2D2' rx='5' ry='5' transform='rotate(-90 35 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23DADADA' rx='5' ry='5' transform='rotate(-60 24.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23E2E2E2' rx='5' ry='5' transform='rotate(-30 -5.98 65)'/%3E%3C/svg%3E\") no-repeat;background-size:100%;margin-right:.2em}@-webkit-keyframes waterfallLoading{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes waterfallLoading{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),t.exports=e},"2b4a":function(t,e,n){var r=n("0614");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("499e").default;i("9c700d46",r,!0,{sourceMap:!1,shadowMode:!1})},"8bbf":function(t,e){t.exports=void 0},a0cf:function(t,e,n){"use strict";n("2b4a")},b635:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("8bbf"),i={ref:"container"},a={key:0,class:"water-fall-more"},o=Object(r["createVNode"])("i",{class:"waterfall-loading"},null,-1),c=Object(r["createVNode"])("span",null,"加载中...",-1);function l(t,e,n,l,u,s){var d=Object(r["resolveComponent"])("water-fall-item");return Object(r["openBlock"])(),Object(r["createBlock"])("div",i,[Object(r["createVNode"])("div",{class:"kuan-vue-waterfall",style:{width:l.containerWidth,height:"".concat(l.containerHeight,"px")}},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(l.list,(function(e,n){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:e.key||e.id,item:e,class:{loaded:e.loaded},style:{padding:l.padding,width:l.itemWidth,left:"".concat(e.left||0,"px"),top:e.loaded?"".concat(e.top||0,"px"):"100%"},onLoad:function(t){return l.load(n,t)}},{default:Object(r["withCtx"])((function(){return[Object(r["renderSlot"])(t.$slots,"default",e)]})),_:2},1032,["item","class","style","onLoad"])})),128))],4),l.loadedData.length<n.data.length?(Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[o,c])):Object(r["createCommentVNode"])("",!0)],512)}n("fb6a"),n("a9e3");var u=n("5c90"),s=(n("99af"),n("5530")),d=n("2909"),f=(n("96cf"),n("1da1")),h=(n("4160"),n("d81d"),n("159b"),n("d4ec")),p=n("bee2");function g(t){for(var e=0,n=1;n<t.length;n++)t[n]<t[e]&&(e=n);return e}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.length<t?(n.push(e()),b(t,e,n)):n}function v(t){return/^\d*$/.test(t)?"".concat(t,"px"):t}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(n,r){var i=e[r]||{};i.key===n.key&&(t[r]=i)})),t}var y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;Object(h["a"])(this,t),this.data=[],this.colNum=n,this.containerHeight=0,this.itemWidth=e,this.heightList=b(this.colNum)}return Object(p["a"])(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.data=[],this.heightList=b(this.colNum),this.prepare(t)}},{key:"prepare",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){var n=g(t.heightList);e.loaded||(e.left=n*t.itemWidth,e.top=Math.min.apply(Math,Object(d["a"])(t.heightList)),e.loaded=1),t.heightList[n]+=e.height||100})),this.containerHeight=Math.max.apply(Math,Object(d["a"])(this.heightList).concat([0])),this.data=this.data.length?[].concat(Object(d["a"])(this.data),Object(d["a"])(e)):e,this.iret()}},{key:"resize",value:function(t,e){this.itemWidth=t,this.colNum=e;var n=this.data.map((function(t){return t.loaded=0,t}));return this.init(n)}},{key:"iret",value:function(){return{data:this.data,containerHeight:this.containerHeight}}}]),t}(),w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(r["reactive"])({list:e,containerWidth:"100%",containerHeight:0}),i=Object(r["ref"])(null),a=null,o=1,c=function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){var i,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.data,a=e.containerHeight,o=window.scrollY,n.list=n.list.length>i.length?[].concat(Object(d["a"])(i),Object(d["a"])(n.list.slice(i.length))):i,n.containerHeight=a,t.next=6,Object(r["nextTick"])();case 6:window.scrollTo({top:o});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(t){a&&c(a.init(t))},h=function(){o=Math.floor(i.value.clientWidth/t)||1,n.containerWidth="".concat(o*t,"px")},p=function(){h(),a=new y(t,o)},g=Object(u["debounce"])((function(){a&&(h(),c(a.resize(t,o)))}));return Object(r["onMounted"])((function(){p(),window.addEventListener("resize",g)})),Object(r["onBeforeMount"])((function(){window.removeEventListener("resize",g)})),Object(s["a"])(Object(s["a"])({},Object(r["toRefs"])(n)),{},{container:i,initData:l,setState:function(t){return n.list=t}})},O={class:"water-fall-item",ref:"container"};function j(t,e,n,i,a,o){return Object(r["openBlock"])(),Object(r["createBlock"])("div",O,[Object(r["renderSlot"])(t.$slots,"default")],512)}n("d3b7"),n("3ca3"),n("ddb0");function x(t){return t.complete?Promise.resolve(!0):new Promise((function(e){t.onload=e,t.onerror=e}))}var k=function(t){return Promise.all(Object(d["a"])(t).map((function(t){return x(t)})))},E={props:{item:{type:Object,default:function(){return{}}}},emits:["load"],setup:function(t,e){var n=e.emit,i=Object(r["ref"])(),a=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k(i.value.querySelectorAll("img"));case 2:setTimeout((function(){n("load",Object(s["a"])(Object(s["a"])({},t.item),{},{height:i.value?i.value.clientHeight:200}))}),200);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r["onMounted"])(a),{container:i}}};E.render=j;var B=E,C={name:"WaterFall",components:{WaterFallItem:B},props:{data:{type:Array,default:function(){return[]},validator:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!t.length||t[0].key}},delay:{type:Boolean,default:!0},gap:{type:[Number,String],default:0},width:{type:[Number,String],default:200}},setup:function(t){var e=Object(r["ref"])([]),n=parseInt(t.width)+parseInt(t.gap),i=w(n,t.data),a=i.list,o=i.initData,c=i.setState,l=i.container,s=i.containerWidth,d=i.containerHeight,f=Object(u["debounce"])((function(){for(var t=0,n=e.value,r=0;r<n.length;r++){if(!n[r])break;t=r}o(n.slice(0,t))})),h=function(t,n){e.value[t]=n,f()};return Object(r["watch"])((function(){return t.data}),(function(t){return c(m(t,a.value))})),{list:a,container:l,containerWidth:s,containerHeight:d,padding:Object(r["computed"])((function(){return v(parseInt(t.gap/2))})),itemWidth:Object(r["computed"])((function(){return v(t.width)})),load:h,loadedData:e}}};n("a0cf");C.render=l;var L=C;L.install=function(t){t.component("WaterFall",L)};e["default"]=L}});
//# sourceMappingURL=app.fd6a9512.js.map